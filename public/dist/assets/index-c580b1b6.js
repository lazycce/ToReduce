import{d as e,a,c as l,e as t,r as s,p as u,q as o,w as r,b as n,g as i,s as d,k as v,v as p,x as c,N as f,y as h,z as w,A as y,B as m,i as g,f as _,H as b,I as k,o as x,J as T,K as z,L as q}from"./index-e19c5bd5.js";import{_ as L}from"./lodash-022d070e.js";const M={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},W=[t("path",{d:"M394 480a16 16 0 0 1-9.39-3L256 383.76L127.39 477a16 16 0 0 1-24.55-18.08L153 310.35L23 221.2a16 16 0 0 1 9-29.2h160.38l48.4-148.95a16 16 0 0 1 30.44 0l48.4 149H480a16 16 0 0 1 9.05 29.2L359 310.35l50.13 148.53A16 16 0 0 1 394 480z",fill:"currentColor"},null,-1)],S=e({name:"Star",render:function(e,t){return a(),l("svg",M,W)}}),U={__name:"EditModal",props:{data:{type:Object,default:()=>({})}},setup(e,{expose:l}){const t=s(!1),b=s({name:"",url:"",showType:"phone",category:"entertainment"}),k=s(),x={name:{required:!0,message:"请输入站点名称",trigger:"blur"},showType:{required:!0,message:"请选择展示尺寸",trigger:"change"}};return l({show:e=>{t.value=!0,b.value=e}}),(e,l)=>{const s=u("NButton");return a(),o(i(m),{to:"body",show:t.value,"onUpdate:show":l[4]||(l[4]=e=>t.value=e)},{default:r((()=>[n(i(y),{style:{width:"350px"}},{footer:r((()=>[n(i(d),{justify:"center"},{default:r((()=>[n(s,{type:"primary",onClick:l[3]||(l[3]=e=>{var a;null==(a=k.value)||a.validate((e=>{e||(g.invoke(_.addWeb,L.cloneDeep(b.value)),t.value=!1)}))})},{default:r((()=>l[7]||(l[7]=[v("收 藏")]))),_:1})])),_:1})])),default:r((()=>[n(i(p),{ref_key:"formRef",ref:k,model:b.value,"label-placement":"left","label-width":"auto",rules:x},{default:r((()=>[n(i(c),{label:"站点名称",path:"name"},{default:r((()=>[n(i(f),{size:"small",value:b.value.name,"onUpdate:value":l[0]||(l[0]=e=>b.value.name=e),placeholder:"请输入站点名称"},null,8,["value"])])),_:1}),n(i(c),{label:"站点网站",path:"url"},{default:r((()=>[n(i(f),{size:"small",value:b.value.url,"onUpdate:value":l[1]||(l[1]=e=>b.value.url=e),disabled:"",placeholder:"站点网站"},null,8,["value"])])),_:1}),n(i(c),{label:"类型",path:"showType"},{default:r((()=>[n(i(h),{value:b.value.showType,"onUpdate:value":l[2]||(l[2]=e=>b.value.showType=e),size:"small"},{default:r((()=>[n(i(d),null,{default:r((()=>[n(i(w),{value:"pc"},{default:r((()=>l[5]||(l[5]=[v(" 电脑 ")]))),_:1}),n(i(w),{value:"phone"},{default:r((()=>l[6]||(l[6]=[v(" 手机 ")]))),_:1})])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["show"])}}},j={style:{height:"100%"}},B={class:"web-container"},C={class:"web-content"},A={__name:"index",setup(e){const d={pc:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:133.0) Gecko/20100101 Firefox/133.0",phone:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Mobile/15E148 Safari/604.1"},v=b(),p=s(),c=s(""),f=s({name:"",url:"",category:"entertainment"});k((()=>v.query.url),((e="")=>{c.value="",setTimeout((()=>{c.value=e,f.value.url=e}),500)}),{immediate:!0});const h=s([]),w=s();return x((()=>{var e;(async()=>{h.value=await g.invoke(_.selectWebList,{category:"study"})})(),console.log("route.query",v.query),f.value=v.query,e=v.query.showType,g.invoke(_.setWindowSizeByType,{type:e})})),(e,s)=>{const v=u("webview");return a(),l("div",j,[n(T,null,{"right-action":r((()=>[n(i(q),{size:"22",onClick:s[0]||(s[0]=e=>{w.value.show(f.value)})},{default:r((()=>[n(i(S))])),_:1})])),_:1}),t("div",B,[t("div",C,[c.value?(a(),o(v,{key:0,ref_key:"webviewRef",ref:p,allowfullscreen:"",src:c.value,plugins:!0,style:{width:"100%",height:"100%"},useragent:d[f.value.showType]},null,8,["src","useragent"])):z("",!0)])]),n(U,{data:f.value,ref_key:"editModalRef",ref:w},null,8,["data"])])}}};export{A as default};
